import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlibimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()def SCRAPE_FILMON_CATS():    url = 'http://www.sdwnet.org/'    link = satools.open_url(url)    match = re.compile ("<div class=\"SideCategoryListClassic\">(.+?)</div>").findall(link)[0]    grab = re.compile ('<a href="(.+?)">(.+?)</a>').findall(match)    for url,title in grab:        title = satools.CLEANUP(title)        if 'P2P' not in title:            satools.addDir("[COLOR silver]" + title + "[/COLOR]",url,15,icon,fanarts,'')    satools.SET_VIEW()    def SCRAPE_FILMON_CHANS(url):    link = satools.open_url(url)    match = re.compile ("<div class=\"CategoryDescription\">(.+?)<br class=\"Clear\" />").findall(link)[0]    grab = re.compile ('<div class="ProductImage">(.+?)</a>').findall(match)    for links in grab:        title = re.compile ('alt="(.+?)"').findall(links)[0]        url = re.compile ('<a href="(.+?)"').findall(links)[0]        icon = re.compile ('<img src="(.+?)"').findall(links)[0]        #url1 = 'plugin://plugin.video.SportsDevil/?mode=1&amp;item=catcher%3dstreams%26url=' + url + '%26referer=no'        satools.addLink("[COLOR silver]" + title + "[/COLOR]",url,5,icon,fanarts,'')    try:        np = re.compile('<a href=\"([^"]*)\">Next &raquo;</a>', re.DOTALL).findall(link)[0]        icon = 'http://i.imgur.com/B4r7zDm.png'        satools.addDir("[COLOR red]Next Page --->[/COLOR]",np,15,icon,fanarts,'')    except:pass