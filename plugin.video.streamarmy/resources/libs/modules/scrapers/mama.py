import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlibimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_SPORTSMAMA_GAMES(url):    url = 'http://mamahd.com/index.html'    link = satools.open_url(url)    match = re.compile('<div class="schedule">(.+?)<div id="pagination">').findall(link)[0]    grab = re.compile ('<a(.+?)</a>').findall(match)    for links in grab:        try:            hometeam = re.compile ('<span>(.+?)</span>').findall(links)[0]            awayteam = re.compile ('<span>(.+?)</span>').findall(links)[1]            url = re.compile ('href="(.+?)"').findall(links)[0]            icon = re.compile ('<img src="(.+?)"').findall(links)[0]                        satools.addLinkRegex("[COLOR crimson]" + hometeam + "[COLOR yellow]" + " Vs " + "[COLOR silver]" + awayteam + "[/COLOR]",url,5,icon,fanarts,'')        except:pass        def SCRAPE_SPORTSMAMA_CHANS(name,url,iconimage):        url = 'http://mamahd.com/'    link = satools.open_url(url)    match = re.compile ('<div class="standard row channels">(.+?)<div class="standard row">').findall(link)[0]    chans = re.compile ('<a href="(.+?)".+?<img src="(.+?)">.+?<span>(.+?)</span>').findall(match)    for link,iconimage,name in chans:        url = link         satools.addLinkRegex("[COLOR silver]" + name + "[/COLOR]",url,5,iconimage,fanarts,'')