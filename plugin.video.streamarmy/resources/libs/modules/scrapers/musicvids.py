import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlib,timeimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_MUSICVIDS_CATS(url):        link = satools.open_url(url)    match = re.compile('<div class="thumb-image">(.+?)</a>').findall(link)    main = 'https://www.funmaza.link'    for links in match:        title = re.compile ('<img alt="(.+?)"').findall(links)[0]        url1 = re.compile ('<a href="(.+?)"').findall(links)[0]        icon1 = re.compile ('src="(.+?)"').findall(links)[0]        url = main + url1        icon = main + icon1        satools.addDir('[COLOR white]' + title + '[/COLOR]',url,74,icon,fanart)            try:        match = re.compile ('<ul class="pagination">(.+?)</ul>').findall(link)[0]        np = re.compile ('<a href="(.+?)"').findall(match)[3]        nextpage = main + np        icon2 = 'http://i.imgur.com/B4r7zDm.png'        satools.addDir('[COLOR red]'+ "Next Page" + '[/COLOR]',nextpage,73,icon2,fanart)    except:pass    def SCRAPE_MUSICVIDS_LINKS(url):    link = satools.open_url(url)    match = re.compile ('<figure class="col-xs-6">(.+?)</a>').findall(link)    main = 'https://www.funmaza.link'    for links in match:        icon1 = re.compile ('<img src="(.+?)"').findall(links)[0]        url1 = re.compile ('<a href="(.+?)">').findall(links)[0]        title = re.compile ('alt="(.+?)"').findall(links)[0]        title = satools.CLEANUP(title)        icon = main + icon1        url = main + url1        satools.addLink('[COLOR white]'+ title + '[/COLOR]',url,75,icon,fanart)        def SCRAPE_MUSICVIDS_PLAY(url):            link = satools.open_url(url)    match2 = re.compile ('<div class="col-xs-6 text-center page-down-btns">(.+?)</a>').findall(link)    for links in match2:        url = re.compile ('<a href="(.+?)"').findall(links)[0]        url = url.replace(' ', '%20')        dp.create(AddonTitle,"[COLOR yellow]Generating link...[/COLOR]",'[COLOR red]Please wait...[/COLOR]','')           dp.update(0)        time.sleep(1)        try:            name,url,iconimage = url.split("!SASPLIT!")            liz = xbmcgui.ListItem(name, iconImage=iconimage, thumbnailImage=iconimage)            xbmc.Player().play(url,liz,False)        except:                xbmc.Player().play(url)            quit()