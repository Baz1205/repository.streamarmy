import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlib,timeimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_PAWPATROL():    titlelist = []    urllist   = []    iconlist  = []    countlist = []    combinedlists = []        url = 'http://sockshare.net/search-movies/paw+patrol.html'    link = satools.open_url(url)    match = re.compile ('<li class="item">(.+?)</li>').findall(link)    for links in match:        try:            title = re.compile ('<div class="status">(.+?)</div').findall(links)[0]            url = re.compile ('href="(.+?)"').findall(links)[0]            icon = re.compile ('<img src="(.+?)"').findall(links)[0]            titlelist.append(title)            urllist.append(url)            iconlist.append(icon)            if 'season' in title.lower():                num = re.findall('(\d)', title)[0]            else: num = 99            countlist.append(str(num))            combinedlists = list(zip(countlist,titlelist,urllist,iconlist))        except:pass    tup = sorted(combinedlists, key=lambda x: int(x[0]),reverse=False)    if tup:        for count,title,url,icon in tup:            satools.addDir("[COLOR white]" + title + "[/COLOR]",url,77,icon,fanart)            def SCRAPE_PAWPATROL_EPI(url,iconimage):    link = satools.open_url(url)    match = re.compile ('<div id="cont_player">(.+?)<div class="content rc-btn">').findall(link)[0]    grab = re.compile ('<a class=".+?" href="(.+?)">(.+?)</a>',re.DOTALL).findall(match)    for url,title in grab:        satools.addLink("[COLOR white]" + "Episode " + title + "[/COLOR]",url,78,iconimage,fanart)        def SCRAPE_PAWPATROL_PLAY(url):    link = satools.open_url(url)    match = re.compile ('<div class="player">(.+?)</script>').findall(link)[0]    grab = re.compile ('Base64.decode.+?"(.+?)"').findall(match)[0]    decode = base64.b64decode(grab)    openme = re.compile ('src="(.+?)"').findall(decode)[0]    link2 = satools.open_url(openme)    match2 = re.compile ('<div id="flaAspectRatio">(.+?)</div>').findall(link2)    for links in match2:        url = re.compile ('<source src="(.+?)"').findall(links)[0]        dp.create(AddonTitle,"[COLOR yellow]Generating link...[/COLOR]",'[COLOR red]Please wait...[/COLOR]','')           dp.update(0)        time.sleep(1)        try:            name,url,iconimage = url.split("!SASPLIT!")            liz = xbmcgui.ListItem(name, iconImage=iconimage, thumbnailImage=iconimage)            xbmc.Player().play(url,liz,False)        except:                xbmc.Player().play(url)            quit()