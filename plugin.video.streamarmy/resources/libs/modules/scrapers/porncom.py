import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlibimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_PORNCOM_CATS():    url = 'https://www.porn.com/categories'        link = satools.open_url(url)    match = re.compile('<div class="wrap grid categories">(.+?)<div class="listFilters listFiltersWide"').findall(link)[0]    grab = re.compile('<a class="thumbs" href="(.+?)" title="(.+?)"><img src="(.+?)"').findall(match)    for link1,title,img in grab:        if not 'http' in link1:            link2 = 'https://www.porn.com' + link1            satools.addDir("[COLOR silver]" + title + "[/COLOR]",link2,69,img,fanart,'')            def SCRAPE_PORNCOM_VIDS(url):    link = satools.open_url(url)    match = re.compile('<ul class="listThumbs">(.+?)<div class="pager">').findall(link)[0]    match2= re.compile ('<img(.+?)<span class="added"').findall(match)    for links in match2:        try:            video = re.compile('<a href="(.+?)"').findall(links)[0]            img = re.compile ('src="(.+?)"').findall(links)[0]            title = re.compile ('class="title">(.+?)<').findall(links)[0]            if not 'http' in video:                video2 = 'https://www.porn.com' + video                satools.addDir("[COLOR silver]" + title + "[/COLOR]",video2,70,img,fanart,'')        except:pass                try:        next_page = re.compile('<link rel="next" href="([^"]*)"').findall(link)[0]        if not 'http' in next_page:            next_page1 = 'https://www.porn.com' + next_page            satools.addDir("[COLOR red]Next Page -->[/COLOR]",next_page1,69,icon,fanart,'')     except: pass    def SCRAPE_PORNCOM_LINKS(name,url,iconimage):    link = satools.open_url(url)    match = re.compile ('<div class="dlRow">(.+?)<div class="bn">').findall(link)[0]    grablinks = re.compile ('<a href="(.+?)".+?</i>(.+?)<').findall(match)    for url1,quality in grablinks:        if not 'http' in url1:            url2 = 'https://www.porn.com' + url1            if 'mp4' in url2:                satools.addLink(quality,url2,7,iconimage,fanart,'')