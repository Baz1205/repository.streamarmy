import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlib,timeimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_RADIO_COUNTRYS():        url = base64.b64decode (b'aHR0cDovL3d3dy5saXN0ZW5saXZlLmV1Lw==')    link = satools.open_url(url)    match = re.compile('<table width="550" id="thetable">(.+?)<table width="180" cellpadding="3" class="cell">',re.DOTALL).findall(link)[0]    grab = re.compile ('<a href="(.+?)">(.+?)</a>').findall(match)    for link1,country in grab:        if 'http' not in link1:            url = 'http://www.listenlive.eu/' + link1            satools.addDir('[COLOR silver]' + country + '[/COLOR]',url,57,icon,fanarts)    satools.SET_VIEW()        def SCRAPE_RADIO_LINKS(url):    link = satools.open_url(url)    match = re.compile('<tr>(.+?)</tr>').findall(link)    for links in match:        try:            title = re.compile ('<td>.+?<b>(.+?)</b>').findall(links)[0]            title = satools.CLEANUP(title)                        url = re.compile ('<a href="(.+?)"').findall(links)[1]            if '.m3u' in url:                if not 'Radio station' in title:                    satools.addLink('[COLOR silver]' + title + '[/COLOR]',url,58,icon,fanarts)        except: pass    satools.SET_VIEW()    def PLAYRADIO(name,url,iconimage):    dp.create(AddonTitle,"[COLOR yellow]Generating link...[/COLOR]",'[COLOR red]Please wait...[/COLOR]','')       dp.update(0)    time.sleep(1)    link = satools.open_url(url).replace('[playlist]NumberOfEntries=1File1=', '')    iconImage = 'http://i.imgur.com/eBxpxQn.png'    liz = xbmcgui.ListItem(name, iconImage=iconimage, thumbnailImage=iconimage)    xbmc.Player ().play(link, liz, False)