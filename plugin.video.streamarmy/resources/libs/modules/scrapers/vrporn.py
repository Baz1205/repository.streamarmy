import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlib,timeimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_VR_CATS():    url = 'https://www.vrsmash.com/category/all'    link = satools.open_url(url)    match = re.compile ('<div class="videoTitle">(.+?)class="videoThumbnail"').findall(link)    for links in match:            title = re.compile ('<strong>(.+?)</strong>').findall(links)[0]            url1 = re.compile ('<a href="(.+?)"').findall(links)[0]            icon1 = re.compile ('<img src="(.+?)"').findall(links)[0]            url = 'https://www.vrsmash.com' + url1            icon = 'https://www.vrsmash.com' + icon1            satools.addDir(title,url,63,icon,fanart)def SCRAPE_VR_VIDS(url):    link = satools.open_url(url)    match = re.compile ('<div class="videoThumbnailHolder">(.+?)</a>').findall(link)    for links in match:        title= re.compile ('alt="(.+?)"').findall(links)[0]        url1= re.compile ('<a href="(.+?)"').findall(links)[0]        icon1= re.compile ('<img src="(.+?)"').findall(links)[0]        url = 'https://www.vrsmash.com' + url1        icon = 'https://www.vrsmash.com/' + icon1        satools.addLink(title,url,64,icon,fanart)            try:        np = re.compile ('<li class="next"><a href=\"([^"]*)\">').findall(link)[0]        nextpage = 'https://www.vrsmash.com' + np        npicon = 'http://i.imgur.com/B4r7zDm.png'        satools.addDir("[COLOR red]Next Page[/COLOR]",nextpage,63,npicon,fanart)    except:pass    def PLAY_VR(url):    link = satools.open_url(url)    match = re.compile ('<div class="viewSectionVideoDownloadOptionHolder">(.+?)</a>').findall(link)[0]    play = re.compile ('<a href="(.+?)"').findall(match)[0]    url = 'https://www.vrsmash.com' + play    dp.create(AddonTitle,"[COLOR yellow]Generating link...[/COLOR]",'[COLOR red]Please wait...[/COLOR]','')       dp.update(0)    time.sleep(1)    try:        name,url,iconimage = url.split("!SASPLIT!")        liz = xbmcgui.ListItem(name, iconImage=iconimage, thumbnailImage=iconimage)        xbmc.Player().play(url,liz,False)    except:            xbmc.Player().play(url)