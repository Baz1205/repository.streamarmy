import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlibimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def SCRAPE_TRANSFERS():    url = 'http://www.skysports.com/football/transfer-news'    link = satools.open_url(url)    match = re.compile ('<div class="box media -bp30-vertical">(.+?)<div class="col span1/1">').findall(link)    for links in match:        headline = re.compile ('class="title text-h2">(.+?)</h2>').findall(links)[0]        image = re.compile ('<img.+?src="(.+?)"').findall(links)[0].replace('#{30}', '30')        text = re.compile ('<p>(.+?)</p>').findall(links)[0]        time = re.compile ('itemprop="dateModified">(.+?)</h5>').findall(links)[0]        satools.addLink("[COLOR white]" + headline + "  " + "[COLOR red]" + time + "[/COLOR]",text,80,image,fanart)    satools.SET_VIEW()def TRANSFERS_POPUP(url):    dialog.ok(AddonTitle,url)