import xbmc,xbmcaddon,xbmcgui,xbmcplugin,urllib,urllib2,os,re,sys,datetime,hashlibimport base64import HTMLParserimport osfrom resources.libs.modules import satoolsaddon_id        = 'plugin.video.streamarmy'AddonTitle      = "[COLOR red][B]STREAM ARMY[/B][/COLOR]"fanart          = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))fanarts         = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id , 'fanart.jpg'))icon            = xbmc.translatePath(os.path.join('special://home/addons/' + addon_id, 'icon.png'))dialog          = xbmcgui.Dialog()dp              = xbmcgui.DialogProgress()def TRENDING_TV():    url = 'http://www.watchepisodeseries.com/home/popular-series'    link = satools.open_url(url)    match = re.compile('<div class="cover-box">(.+?)<div class="cb-star">').findall(link)    for links in match:        title = re.compile ('<div title="(.+?)"').findall(links)[0]        title = satools.CLEANUP(title)        url = re.compile ('<a href="(.+?)"').findall(links)[0]        icon = re.compile ('style="background-image: (.+?)"').findall(links)[0].replace('url(\'', '').replace('\')', '')        fanart = re.compile ('style="background-image: (.+?)"').findall(links)[0].replace('url(\'', '').replace('\')', '')        satools.addDir(title,url,18,icon,fanart)    satools.SET_VIEW()